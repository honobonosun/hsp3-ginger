# ノート

## 曖昧な文

OpenHSP コンパイラは、組み込み命令 (mes など) や、`#deffunc` 等により定義される命令を処理してから命令文などの構文解析を行うため、構文解析の段階で変数と命令 (および関数・システム変数) を区別できる。一方、フォージェリはそのような前処理なしに構文解析を行うため、変数と命令を区別できない。

この違いから、一部の文の解釈が曖昧になる問題が生じる。例えば、以下の3パターンがある。

```hsp
    // x が命令なら、命令 x に引数式 -y を渡す命令文
    // そうでなければ、変数 x から y を引く複合代入文
    x-y

    // x が命令なら、命令 x に引数式 *y (ラベル) を渡す命令文
    // そうでなければ、変数 x に y をかける複合代入文
    x*y

    // x が命令なら、命令 x に引数式 (y)=z を渡す命令文
    // x が変数なら、配列要素 x(y) に z を代入する代入文
    x(y)=z
```
